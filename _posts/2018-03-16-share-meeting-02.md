---
layout: post
title: "第二次技术分享会记录 代理项目"
tags: [网络编程, tcp, 技术分享会, 代理]
comments: true
date: 2018-03-16 22:00:00+08:00
---

##### 分享会日期：2018-03-16
##### 持续时间：16:00-20:30，4个半小时

>新的一年里，想让自己有些改变、有些进步、有些其他方面的尝试，于是在公司面向技术同事组织了分享会，未来很长一段时期，应该都会由我来主持和主讲，因此在此做些记录，记录下成长轨迹。

>顺序可能有点乱，因为都是即兴发挥，脱稿讲解，可能有很多不足之处，希望能包涵。。。。

##### 一. socks5协议
1. 介绍socks5协议，其能实现的功能，为什么能实现tcp+udp的代理
2. 引出协议头的概念，并复习上次讲解的以太网帧、Ip数据报、Tcp包的协议头做类比，每一层所携带的关键内容

##### 二. 实际场景
1. 介绍场景：国内的手机A想要去访问一些请求链接（http、https、socket、udp都有可能），但是他想掩藏身份，让目标方服务器认为他是其他的用户的行为（主要是Ip上的掩藏），试想解决方案有哪些
2. 引出内网穿透的概念
>由于具体内容属于公司技术机密，暂时不做过多细节公布，只做一些普遍性的技术介绍
3. 引出NAT的概念，即内网的服务为什么对于外网来说不可访问、为什么内网可以访问外网并且被访问的服务器可以拿到一个访问者Ip、这个Ip究竟是谁的Ip、response又是如何成功发送到内网机器
4. 介绍常见的内网穿透的方案
5. 具体到下发到手机，哪些方案可行，哪些方案不可行

##### 三. SSH远程端口转发
1. 对于内网穿透，我们很容易想到的是ssh自带的远程端口转发（即ssh -R命令），让远端服务器上的端口A中的请求通过ssh隧道转发到内网机器的指定端口B上，此时，只需要远端服务器暴露对外端口C服务，将C中所有流量转发到A上，即可实现内网机器端口B服务的对外可访问
2. 讨论ssh远程端口转发方案的可行性、难以程度以及开发过程中遇到的问题 （包括连接稳定性、可维护性、对机器的负载压力和流量压力等等）
3. 讨论这些问题是否可解决以及怎么解决


##### 四. 单socket连接的方案
1. 从上面的问题，引出一种备选方案，即内网机器通过一条socket链接去接收所有服务器转发来的请求
2. 讨论socket的特点（即tcp的特点）、一条socket能实现的功能究竟有哪些
3. 如何通过一条socket去模拟承载多个并发请求的交互数据、server和socket需要完成哪些工作解决这样的问题
4. 正常网络编程中的常见问题，如黏包、多线程并发写一条socket等等的问题，为什么会有这样的问题、问题又该如何解决


> 这次分享到此为止，下周会继续，主题将是分布式相关的介绍，主要集中在ZooKeeper和Kafka这两项开源项目上